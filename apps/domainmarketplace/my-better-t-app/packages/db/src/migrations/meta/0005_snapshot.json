{
  "id": "5b655ef0-6a47-4ce9-9fb3-1d4e5c8f9a2b",
  "prevId": "4a544df9-5946-4bd8-8ea2-0c4382c97b44",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.click_rollups": {
      "name": "click_rollups",
      "schema": "",
      "columns": {
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "hire_id": {
          "name": "hire_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "valid_clicks": {
          "name": "valid_clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "invalid_clicks": {
          "name": "invalid_clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "click_rollups_hire_id_idx": {
          "name": "click_rollups_hire_id_idx",
          "columns": [
            {
              "expression": "hire_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "click_rollups_day_idx": {
          "name": "click_rollups_day_idx",
          "columns": [
            {
              "expression": "day",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "click_rollups_hire_id_hires_id_fk": {
          "name": "click_rollups_hire_id_hires_id_fk",
          "tableFrom": "click_rollups",
          "tableTo": "hires",
          "columnsFrom": [
            "hire_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "click_rollups_pk": {
          "name": "click_rollups_pk",
          "columns": [
            "day",
            "hire_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.hires": {
      "name": "hires",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "listing_id": {
          "name": "listing_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hirer_id": {
          "name": "hirer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_item_id": {
          "name": "stripe_subscription_item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "start_at": {
          "name": "start_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "end_at": {
          "name": "end_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "hires_listing_id_idx": {
          "name": "hires_listing_id_idx",
          "columns": [
            {
              "expression": "listing_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "hires_hirer_id_idx": {
          "name": "hires_hirer_id_idx",
          "columns": [
            {
              "expression": "hirer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "hires_stripe_customer_id_idx": {
          "name": "hires_stripe_customer_id_idx",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "rentals_listing_id_listings_id_fk": {
          "name": "rentals_listing_id_listings_id_fk",
          "tableFrom": "hires",
          "tableTo": "listings",
          "columnsFrom": [
            "listing_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "rentals_renter_id_user_id_fk": {
          "name": "rentals_renter_id_user_id_fk",
          "tableFrom": "hires",
          "tableTo": "user",
          "columnsFrom": [
            "hirer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "hires_type_check": {
          "name": "hires_type_check",
          "value": "\"hires\".\"type\" in ('period', 'per_click')"
        },
        "hires_status_check": {
          "name": "hires_status_check",
          "value": "\"hires\".\"status\" in ('active', 'ended', 'suspended')"
        }
      },
      "isRLSEnabled": false
    },
    "public.invoices": {
      "name": "invoices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "hire_id": {
          "name": "hire_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_invoice_id": {
          "name": "stripe_invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount_cents": {
          "name": "amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "invoices_hire_id_idx": {
          "name": "invoices_hire_id_idx",
          "columns": [
            {
              "expression": "hire_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "invoices_hire_id_hires_id_fk": {
          "name": "invoices_hire_id_hires_id_fk",
          "tableFrom": "invoices",
          "tableTo": "hires",
          "columnsFrom": [
            "hire_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "invoices_stripe_invoice_id_unique": {
          "name": "invoices_stripe_invoice_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripe_invoice_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "invoices_type_check": {
          "name": "invoices_type_check",
          "value": "\"invoices\".\"type\" in ('period', 'usage')"
        },
        "invoices_status_check": {
          "name": "invoices_status_check",
          "value": "\"invoices\".\"status\" in ('draft', 'open', 'paid', 'void', 'uncollectible')"
        }
      },
      "isRLSEnabled": false
    },
    "public.usage_ledger": {
      "name": "usage_ledger",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "hire_id": {
          "name": "hire_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_item_id": {
          "name": "subscription_item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "clicks_sent": {
          "name": "clicks_sent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'sent'"
        }
      },
      "indexes": {
        "usage_ledger_hire_id_idx": {
          "name": "usage_ledger_hire_id_idx",
          "columns": [
            {
              "expression": "hire_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "usage_ledger_subscription_item_day_unique": {
          "name": "usage_ledger_subscription_item_day_unique",
          "columns": [
            {
              "expression": "subscription_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "day",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "usage_ledger_hire_id_hires_id_fk": {
          "name": "usage_ledger_hire_id_hires_id_fk",
          "tableFrom": "usage_ledger",
          "tableTo": "hires",
          "columnsFrom": [
            "hire_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_ledger_idempotency_key_unique": {
          "name": "usage_ledger_idempotency_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idempotency_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "usage_ledger_status_check": {
          "name": "usage_ledger_status_check",
          "value": "\"usage_ledger\".\"status\" in ('sent', 'failed', 'corrected')"
        }
      },
      "isRLSEnabled": false
    },
    "public.disputes": {
      "name": "disputes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "hire_id": {
          "name": "hire_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claimant_id": {
          "name": "claimant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "claimant_role": {
          "name": "claimant_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "resolution": {
          "name": "resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "credit_amount_cents": {
          "name": "credit_amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_reference_id": {
          "name": "stripe_reference_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_by": {
          "name": "resolved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "disputes_hire_id_hires_id_fk": {
          "name": "disputes_hire_id_hires_id_fk",
          "tableFrom": "disputes",
          "tableTo": "hires",
          "columnsFrom": [
            "hire_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "disputes_claimant_id_user_id_fk": {
          "name": "disputes_claimant_id_user_id_fk",
          "tableFrom": "disputes",
          "tableTo": "user",
          "columnsFrom": [
            "claimant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "disputes_resolved_by_user_id_fk": {
          "name": "disputes_resolved_by_user_id_fk",
          "tableFrom": "disputes",
          "tableTo": "user",
          "columnsFrom": [
            "resolved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "disputes_claimant_role_check": {
          "name": "disputes_claimant_role_check",
          "value": "\"disputes\".\"claimant_role\" in ('owner', 'hirer')"
        },
        "disputes_status_check": {
          "name": "disputes_status_check",
          "value": "\"disputes\".\"status\" in ('open', 'investigating', 'resolved', 'rejected')"
        }
      },
      "isRLSEnabled": false
    },
    "public.routes": {
      "name": "routes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "hire_id": {
          "name": "hire_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "host": {
          "name": "host",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'/'"
        },
        "target_url": {
          "name": "target_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "redirect_code": {
          "name": "redirect_code",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 302
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "routes_hire_host_path_unique": {
          "name": "routes_hire_host_path_unique",
          "columns": [
            {
              "expression": "hire_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "host",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "path",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "routes_hire_id_idx": {
          "name": "routes_hire_id_idx",
          "columns": [
            {
              "expression": "hire_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "routes_hire_id_hires_id_fk": {
          "name": "routes_hire_id_hires_id_fk",
          "tableFrom": "routes",
          "tableTo": "hires",
          "columnsFrom": [
            "hire_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "routes_redirect_code_check": {
          "name": "routes_redirect_code_check",
          "value": "\"routes\".\"redirect_code\" in (301, 302, 307, 308)"
        }
      },
      "isRLSEnabled": false
    },
    "public.user": {
      "name": "user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_verified": {
          "name": "email_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_email_unique": {
          "name": "user_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "user_role_check": {
          "name": "user_role_check",
          "value": "\"user\".\"role\" in ('owner', 'hirer', 'admin')"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}

